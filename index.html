<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Connected Portal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .fade-in {
            animation: fadeIn 0.3s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800 min-h-screen flex flex-col items-center justify-center font-sans">

    <!-- Main Navigation Menu -->
    <div id="main-menu" class="text-center space-y-8 fade-in">
        <h1 class="text-4xl font-bold text-gray-700 mb-8">Main Portal</h1>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <button onclick="navigateTo('page1')" class="bg-blue-500 hover:bg-blue-600 text-white font-semibold py-4 px-8 rounded-lg shadow-lg transition transform hover:scale-105">
                Go to Page 1
            </button>
            <button onclick="navigateTo('page2')" class="bg-green-500 hover:bg-green-600 text-white font-semibold py-4 px-8 rounded-lg shadow-lg transition transform hover:scale-105">
                Go to Page 2
            </button>
            <button onclick="navigateTo('page3')" class="bg-purple-500 hover:bg-purple-600 text-white font-semibold py-4 px-8 rounded-lg shadow-lg transition transform hover:scale-105">
                Go to Page 3
            </button>
            <button onclick="navigateTo('page4')" class="bg-red-500 hover:bg-red-600 text-white font-semibold py-4 px-8 rounded-lg shadow-lg transition transform hover:scale-105">
                Go to Page 4
            </button>
        </div>
    </div>

    <!-- Generic Page Container (Content injected via JS) -->
    <div id="page-container" class="hidden w-full max-w-2xl p-6 fade-in">
        <div class="bg-white rounded-xl shadow-2xl p-8 border border-gray-200">
            <!-- Header -->
            <div class="flex justify-between items-center mb-6 border-b pb-4">
                <h2 id="page-title" class="text-2xl font-bold text-gray-800">Page Title</h2>
                <button onclick="showMainMenu()" class="text-sm text-gray-500 hover:text-gray-800 underline">
                    &larr; Back to Home
                </button>
            </div>

            <!-- Backend Status Indicator -->
            <div id="backend-status" class="mb-6 p-4 rounded bg-gray-50 border">
                <p class="text-sm font-mono text-gray-500">Connecting to backend...</p>
            </div>

            <!-- Content Area -->
            <div class="h-64 flex items-center justify-center bg-gray-50 rounded-lg border-2 border-dashed border-gray-200">
                <p class="text-gray-400 italic">This is a blank template page</p>
            </div>
        </div>
    </div>

   <script>
    // Configuration: URL of your Python backend
    const BACKEND_URL = 'https://test-site-law.onrender.com';

    // 1. ADD THIS HELPER FUNCTION
    function toggleBot(shouldShow) {
        const bot = document.getElementById('my-chat-bot');
        if (bot) {
            bot.style.display = shouldShow ? 'block' : 'none';
        } else {
            console.error("Bot element not found!");
        }
    }

    function showMainMenu() {
        document.getElementById('page-container').classList.add('hidden');
        document.getElementById('main-menu').classList.remove('hidden');
        
        // 2. ENSURE BOT HIDES ON MENU
        toggleBot(false);
    }

    // 3. UPDATE THIS FUNCTION COMPLETELY
    function navigateTo(pageId) {
        // Hide menu, show page container
        document.getElementById('main-menu').classList.add('hidden');
        const container = document.getElementById('page-container');
        container.classList.remove('hidden');

        // Update Title
        const titles = {
            'page1': 'Dashboard View',
            'page2': 'Settings Panel',
            'page3': 'User Profile',
            'page4': 'Analytics Reports'
        };
        document.getElementById('page-title').innerText = titles[pageId] || 'Unknown Page';

        // --- NEW CODE: CHECK IF WE ARE ON PAGE 1 ---
        if (pageId === 'page1') {
            toggleBot(true);  // SHOW BOT
        } else {
            toggleBot(false); // HIDE BOT
        }
        // -------------------------------------------

        // Check Backend Connection
        checkBackend(pageId);
    }

    async function checkBackend(endpoint) {
        // ... (Keep your existing checkBackend code here, it is working fine!) ...
        const statusDiv = document.getElementById('backend-status');
        // ... rest of the function ...
        statusDiv.className = "mb-6 p-4 rounded bg-yellow-50 border border-yellow-200 text-yellow-700";
        statusDiv.innerHTML = "Fetching data..."; // Simplified for brevity in this snippet
        
        try {
            const response = await fetch(`${BACKEND_URL}/api/${endpoint}`);
            if (!response.ok) throw new Error('Network response was not ok');
            const data = await response.json();
            
            statusDiv.className = "mb-6 p-4 rounded bg-green-50 border border-green-200 text-green-700";
            statusDiv.innerHTML = `<p class="font-bold">âœ“ Connected to Backend</p><p>${data.message}</p>`;
        } catch (error) {
            console.error(error);
        }
    }
</script>
    <script src="https://cdn.jsdelivr.net/gh/logspace-ai/langflow-embedded-chat@v1.0.7/dist/build/static/js/bundle.min.js"></script>

    <langflow-chat
        id="my-chat-bot"               style="display: none"          window_title="Vector Store RAG - GitHub"
        flow_id="90ad0982-52c0-4fc0-9660-92735a850aae"
        host_url="https://langflow.sail.codes"
        api_key="sk-jrgWII-Da4LIPWIa294XI3GQgESPkbad4ieCbxfTU48">
    </langflow-chat>
</body>

</html>



